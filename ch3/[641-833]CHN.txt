【641】来看看这一共多少行

如果我键入 `wc -l`

这有……

一十九万八千行

这个 `wc` 是计数程序（**w**ord **c**ount）

用 `-l` 让它统计行数

所以这么多行

如果我只是边翻边看，意义也不大 # REVIEW

对吧，我需要的是统计数据

我需要找个方法合计数据

以及 `sed` 这个工具用途很广

它提供了一个完整的编程语言

可以做一些，比如插入文本

或者只输出匹配行的操作

但它不是应付一切的完美工具，明白吗

就比如说，你可以用 `sed` 

编程实现行数统计

但绝对别这么干

除了搜索替换之外

`sed` 的编程语言挺烂的

但是，还有别的好用的工具

比如有个叫 `sort` 的

这虽然作用不大

`sort` 会接受很多行的输入

排一个序，然后输出到输出流

现在，我有了这个排序后的列表

它仍然有二十万行，所以还不是很好

但现在我可以把 `unique` 结合进来

这个工具 `unique` 作用于有序的数行

只打印那些 # REVIEW 这里怎么搞

也即，如果你有重复的行

这些行只会被打印一次

我可以执行 `unique -c`

意为，对重复的行，计算它们重复的数量

然后将其（从输出中）去除

这会输出什么呢？

呃，如果我执行它，会处理一会

里边有 13 个 `zzz` 用户名

10 个 `zxvf` 用户名，等等

我可以上下翻看

这仍是一个很长的表单，对吧

但现在，至少比原来稍微条理点了

看看现在我们提出来多少行

好，两万四千行，仍然很多

虽然对我而言，这些信息没用

但我可以用更多工具，不断缩减它

比如我可能想知道

哪个用户名出现的最多

我可以再排个序

我想要对输入的第一列做数值排序

所以 `-n` 意为数值排序

`-k` 允许你在输入中

选中空白字符分隔的一列，执行排序

这里我加了一个 `,1` 的原因是

我想要从第一行选起，在第一行结束

除此之外我也可以要求

依据所有的列排序 # REVIEW 这里没太明白

但这里我只想用第一行

然后我只想要最后十行

`sort` 默认是以升序输出

所以计数最高的一条在最底下

然后我就只要最后十行

现在再跑的时候

我就有比较有用的数据了，对吧

它告诉我用户名 `root` 有一万多次登录尝试

用户名 `123456` 有四千多次

这就很棒了

现在这个大日志突然就给我有用信息了

这是我真正想从日志里要的信息

现在我可能就想，比如

快速地禁用一下我机器上

比如 SSH 登录的 `root` 用户名 # REVIEW

顺便我也建议你们这样做

其实对于这个情况

我们不需要 `sort` 的 `-k`

因为 `sort` 默认按整行排序

而数字又恰巧在前头

但了解这些额外的 flag 是有益的

你可能想问，我是怎么知道有这些 flag 的

我是怎么了解这些程序的存在的

【733】